@model IEnumerable<ProyectoFinal.Clases.Consultas.ProductoCONS>

@{
    ViewData["Title"] = "Index";
    List<SelectListItem> clases, modelos, tallas;
    clases = ViewBag.clases;
    modelos = ViewBag.modelos;
    tallas = ViewBag.tallas;
    int clase = ViewBag.clase == null ? 0 : ViewBag.clase;
    int modelo = ViewBag.modelo == null ? 0 : ViewBag.modelo;
    int talla = ViewBag.talla == null ? 0 : ViewBag.talla;
}


<head>
    <style>
        select#idModelo {
            padding: 4px 0px 0px 6px;
            height: 27px;
            width: 138px;
        }

        select#idClase {
            padding: 4px 0px 0px 6px;
            height: 27px;
            width: 138px;
        }

        select#idBarbiquejo {
            padding: 4px 0px 0px 6px;
            height: 27px;
            width: 138px;
        }


        select#idTalla {
            padding: 4px 0px 0px 6px;
            height: 27px;
            width: 138px;
        }

        .Contenedor_Adentro {
            margin: -54px 154px;
        }

        .Contenedor_Adentro2 {
            margin: 0px 306px;
        }

        .Contenedor_Adentro3 {
            margin: -54px 457px;
        }

        .botones {
            margin: 20px 612px;
        }

        a.btn.btn-success {
            margin: 20px -612px;
        }

        form#formBuscar {
            border-style: solid;
            border-width: medium;
            padding: 21px 59px 1px;
            margin: 5px 2px 12px 1px;
            background-color: wheat;
        }

        a.btn.btn-success {
            margin: 0px -2px;
            padding: 12px 12px -1px;
        }

        .form-select {
            height: 31px;
            display: block;
            width: 138px;
            padding: .375rem 2.25rem .375rem .75rem;
            -moz-padding-start: calc(0.75rem - 3px);
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #212529;
            background-color: #fff;
            background-image: url(data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e);
            background-repeat: no-repeat;
            background-position: right .75rem center;
            background-size: 16px 12px;
            border: 1px solid #ced4da;
            border-radius: .25rem;
            transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        form#formBuscar {
            width: 100%;
            height: 120px;
        }

        .botones {
            margin: -36px 628px;
        }

        h4Editar{
            text-align:center;
        }

        .card-body {
            flex: 1 2 auto;
            padding: 1rem 0rem;
            margin: 6px -1px 0 17px;
        }

        .card.col-4.col-md-6 {
    border-style: solid;
    border-width: medium;
    border-color: black;
}

        .h4Editar {
            font-family: 'Slabo 27px', serif;
            font-size: 46px;
            height: 29px;
            text-align: center;
        }
    </style>

</head>

<h4 class="h4Editar"> Productos</h4></b>
<hr />
<div class="Contenedor">
    <form class="form" id="formBuscar" method="post">
    
        <label class="form-label">@Html.DisplayNameFor(model => model.clase)</label>
        <select asp-items="@modelos" class="form-select" name="idModelo" id="modelo"></select>
    
    <div class="Contenedor_Adentro">
        <label class="form-label">@Html.DisplayNameFor(model => model.modelo)</label>
        <select asp-items="@clases" class="form-select" name="idClase" id="clase"></select>
    </div>    
    <div class="Contenedor_Adentro2">
        <label class="form-label">@Html.DisplayNameFor(model => model.talla)</label>
        <select asp-items="@tallas" class="form-select" name="idTalla" id="talla"></select>
    </div>
    <div class="botones">
    <div class="btn-group">
        <button type="submit" class="btn btn-primary">Buscar</button>
        <button type="button" class="btn btn-warning" onclick="limpiarSombrero()">Filtrar</button>
    </div>
    </div>
</form>
</div>
<div class="container">
    <div class="row gap-2 justify-content-center">
        @foreach (var item in @Model)
        {
            <div class="card col-4 col-md-6" style="width: 18rem;">
                <img src="~/img/@item.imagen" class="card-img-top" alt="...">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">@Html.DisplayNameFor(model => model.modelo): @item.modelo</li>
                    <li class="list-group-item">@Html.DisplayNameFor(model => model.clase): @item.clase</li>
                    <li class="list-group-item">@Html.DisplayNameFor(model => model.talla): @item.talla</li>
                    <li class="list-group-item">@Html.DisplayNameFor(model => model.precio): $@item.precio</li>
                    <li class="list-group-item">@Html.DisplayNameFor(model => model.strock): $@item.strock</li>
                </ul>
                <div class="card-body">
                    @Html.ActionLink("Ver detalles", "Detalles", "Producto", new { id = item.id }, new {@class="btn btn-primary"})
                    <a class="btn btn-success">Añadir el carrito</a>
                </div>
            </div>
        }
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        document.getElementById("clase").value = @clase
        document.getElementById("modelo").value = @modelo
    })

    const limpiarSombrero = () =>{
        document.getElementById("clase").value = 0
        document.getElementById("modelo").value = 0
        document.getElementById("talla").value = 0
        document.getElementById("formBuscar").submit()
    }
</script>
